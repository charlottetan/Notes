
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.9">
    
    
      
        <title>Template - RKK1995's notes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7C&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:""}</style>
      
    
    
    
      <link rel="stylesheet" href="../stylesheets/dt.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="blue">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#template" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="RKK1995&#39;s notes" class="md-header__button md-logo" aria-label="RKK1995's notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RKK1995's notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Template
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="dark-blue" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/rkk1995/Notes/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../index.html" class="md-tabs__link">
      About the Site
    </a>
  </li>

      
        
  
  


  
  
  
    

  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../Notes/papers/Storage/aurora.html" class="md-tabs__link">
        Notes
      </a>
    </li>
  

  

  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="Template.html" class="md-tabs__link md-tabs__link--active">
        System Design
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="RKK1995&#39;s notes" class="md-nav__button md-logo" aria-label="RKK1995's notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    RKK1995's notes
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/rkk1995/Notes/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        About the Site
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Notes
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Notes" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      <label class="md-nav__link" for="__nav_2_1">
        Papers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Papers" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Papers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_1" type="checkbox" id="__nav_2_1_1" >
      
      <label class="md-nav__link" for="__nav_2_1_1">
        Storage
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Storage" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          Storage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/papers/Storage/aurora.html" class="md-nav__link">
        Aurora
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/papers/Storage/craq.html" class="md-nav__link">
        CRAQ
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/papers/Storage/dynamo.html" class="md-nav__link">
        Dynamo
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/papers/Storage/farm.html" class="md-nav__link">
        FaRM
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/papers/Storage/frangipani.html" class="md-nav__link">
        Frangipani
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/papers/Storage/gfs.html" class="md-nav__link">
        GFS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/papers/Storage/memcache.html" class="md-nav__link">
        Memcache
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/papers/Storage/spanner.html" class="md-nav__link">
        Spanner
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/papers/Storage/tao.html" class="md-nav__link">
        TAO
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_2" type="checkbox" id="__nav_2_1_2" >
      
      <label class="md-nav__link" for="__nav_2_1_2">
        Compute
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Compute" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_2">
          <span class="md-nav__icon md-icon"></span>
          Compute
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/papers/Compute/distributedTransactions.html" class="md-nav__link">
        Distributed Transactions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/papers/Compute/mapreduce.html" class="md-nav__link">
        MapReduce
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1_3" type="checkbox" id="__nav_2_1_3" >
      
      <label class="md-nav__link" for="__nav_2_1_3">
        Cluster Management
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Cluster Management" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_1_3">
          <span class="md-nav__icon md-icon"></span>
          Cluster Management
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/papers/Cluster%20Management/raft.html" class="md-nav__link">
        Raft
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/papers/Cluster%20Management/zookeeper.html" class="md-nav__link">
        ZooKeeper
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      <label class="md-nav__link" for="__nav_2_2">
        Books
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Books" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Books
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_1" type="checkbox" id="__nav_2_2_1" >
      
      <label class="md-nav__link" for="__nav_2_2_1">
        DDIA
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="DDIA" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_2_1">
          <span class="md-nav__icon md-icon"></span>
          DDIA
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/books/DDIA/chapter1.html" class="md-nav__link">
        1. Reliable, scalable, and maintainable applications
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/books/DDIA/chapter2.html" class="md-nav__link">
        2. Data Models and Query Languages
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/books/DDIA/chapter3.html" class="md-nav__link">
        3. Storage and retrieval
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/books/DDIA/chapter4.html" class="md-nav__link">
        4. Encoding and evolution
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/books/DDIA/chapter5.html" class="md-nav__link">
        5. Replication
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/books/DDIA/chapter6.html" class="md-nav__link">
        6. Partitioning
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/books/DDIA/chapter7.html" class="md-nav__link">
        7. Transactions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/books/DDIA/chapter8.html" class="md-nav__link">
        8. The Trouble With Distributed Systems
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      <label class="md-nav__link" for="__nav_2_3">
        Todo
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Todo" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Todo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Notes/todo/articles.html" class="md-nav__link">
        TODO
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        System Design
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="System Design" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          System Design
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Template
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="Template.html" class="md-nav__link md-nav__link--active">
        Template
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-gather-requirements-1-2-min" class="md-nav__link">
    (1) Gather Requirements [1-2 min]
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-functional-non-functional-requirements-5-min" class="md-nav__link">
    (2) Functional + Non Functional Requirements [5 min]
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-capacity-estimations-3-min" class="md-nav__link">
    (3) Capacity Estimations [3 min]
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-high-level-design-5-10-min" class="md-nav__link">
    (4) High Level Design [5-10 min]
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-data-model-5-min" class="md-nav__link">
    (5) Data Model [5 min]
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-deep-dive-15-20-min" class="md-nav__link">
    (6) Deep Dive [15-20 min]
  </a>
  
    <nav class="md-nav" aria-label="(6) Deep Dive [15-20 min]">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#database-scaling" class="md-nav__link">
    Database scaling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-queues" class="md-nav__link">
    Message Queues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caches" class="md-nav__link">
    Caches
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-balancer" class="md-nav__link">
    Load Balancer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#communication" class="md-nav__link">
    Communication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-cases" class="md-nav__link">
    Error cases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cdn" class="md-nav__link">
    CDN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loggingmetrics" class="md-nav__link">
    Logging/Metrics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      <label class="md-nav__link" for="__nav_3_2">
        Concepts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Concepts" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="Concepts/CDN.html" class="md-nav__link">
        CDN
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Concepts/Cache.html" class="md-nav__link">
        Cache
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Concepts/Communication.html" class="md-nav__link">
        Communication
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Concepts/ConnectionTypes.html" class="md-nav__link">
        Connection Types
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Concepts/DNS.html" class="md-nav__link">
        DNS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Concepts/Load%20Balancer.html" class="md-nav__link">
        Load Balancer
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Concepts/Reverse%20Proxy.html" class="md-nav__link">
        Reverse Proxy
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_8" type="checkbox" id="__nav_3_2_8" >
      
      <label class="md-nav__link" for="__nav_3_2_8">
        Databases
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Databases" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_8">
          <span class="md-nav__icon md-icon"></span>
          Databases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="Concepts/Databases/HBase.html" class="md-nav__link">
        HBase
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Concepts/Databases/MySQL%20Binlog-and-Replication.html" class="md-nav__link">
        MySQL BinLog
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Concepts/Databases/SQL%20or%20NoSQL.html" class="md-nav__link">
        SQL vs NoSQL
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Concepts/Databases/Scaling%20SQL%20Detailed.html" class="md-nav__link">
        Scaling SQL Detailed
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Concepts/Databases/Scaling%20SQL%20and%20NoSQL.html" class="md-nav__link">
        Scaling SQL and NoSQL
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_9" type="checkbox" id="__nav_3_2_9" >
      
      <label class="md-nav__link" for="__nav_3_2_9">
        Misc
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Misc" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_9">
          <span class="md-nav__icon md-icon"></span>
          Misc
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="Concepts/Misc/backOfTheEnvelope.html" class="md-nav__link">
        Back of Envelope Calculations
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Concepts/Misc/encodingAndDecoding.html" class="md-nav__link">
        Encoding And Decoding
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      <label class="md-nav__link" for="__nav_3_3">
        Components
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Components" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Components
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="Components/KeyGenerationService.html" class="md-nav__link">
        Key Generation Service
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      <label class="md-nav__link" for="__nav_3_4">
        System Design Interview YT Channel
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="System Design Interview YT Channel" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          System Design Interview YT Channel
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="System%20Design%20Interview%20YT%20Channel/distributedCache.html" class="md-nav__link">
        Distributed Cache
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="System%20Design%20Interview%20YT%20Channel/distributedMessageQueue.html" class="md-nav__link">
        Distributed Message Queue
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="System%20Design%20Interview%20YT%20Channel/notificationService.html" class="md-nav__link">
        Notification Service
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="System%20Design%20Interview%20YT%20Channel/rateLimiting.html" class="md-nav__link">
        Rate Limiting (local and distributed)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="System%20Design%20Interview%20YT%20Channel/stepByStepGuide.html" class="md-nav__link">
        Step By Step Guide
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="System%20Design%20Interview%20YT%20Channel/topKHeavyHitters.html" class="md-nav__link">
        Top K Heavy Hitters
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" >
      
      <label class="md-nav__link" for="__nav_3_5">
        Examples
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Examples" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="Examples/dropbox.html" class="md-nav__link">
        Dropbox
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Examples/trendingTopics.html" class="md-nav__link">
        Trending Topics
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6" type="checkbox" id="__nav_3_6" >
      
      <label class="md-nav__link" for="__nav_3_6">
        Real World Examples
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Real World Examples" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Real World Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6_1" type="checkbox" id="__nav_3_6_1" >
      
      <label class="md-nav__link" for="__nav_3_6_1">
        Facebook
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Facebook" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_6_1">
          <span class="md-nav__icon md-icon"></span>
          Facebook
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="Real%20World%20Examples/Facebook/FacebookIris.html" class="md-nav__link">
        Iris - Building Mobile-First Infrastructure for Messenger
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="Real%20World%20Examples/Facebook/Wormhole.html" class="md-nav__link">
        Large-Scale Low-Latency Storage for the Social Network
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6_2" type="checkbox" id="__nav_3_6_2" >
      
      <label class="md-nav__link" for="__nav_3_6_2">
        LinkedIn
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="LinkedIn" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_6_2">
          <span class="md-nav__icon md-icon"></span>
          LinkedIn
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="Real%20World%20Examples/LinkedIn/LinkedInRealTimeVideo.html" class="md-nav__link">
        LinkedIn Real-Time Interactions on Live Video
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6_3" type="checkbox" id="__nav_3_6_3" >
      
      <label class="md-nav__link" for="__nav_3_6_3">
        Netflix
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Netflix" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_6_3">
          <span class="md-nav__icon md-icon"></span>
          Netflix
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="Real%20World%20Examples/Netflix/ScalingPush.html" class="md-nav__link">
        Scaling Push Messages
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-gather-requirements-1-2-min" class="md-nav__link">
    (1) Gather Requirements [1-2 min]
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-functional-non-functional-requirements-5-min" class="md-nav__link">
    (2) Functional + Non Functional Requirements [5 min]
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-capacity-estimations-3-min" class="md-nav__link">
    (3) Capacity Estimations [3 min]
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-high-level-design-5-10-min" class="md-nav__link">
    (4) High Level Design [5-10 min]
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-data-model-5-min" class="md-nav__link">
    (5) Data Model [5 min]
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-deep-dive-15-20-min" class="md-nav__link">
    (6) Deep Dive [15-20 min]
  </a>
  
    <nav class="md-nav" aria-label="(6) Deep Dive [15-20 min]">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#database-scaling" class="md-nav__link">
    Database scaling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-queues" class="md-nav__link">
    Message Queues
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caches" class="md-nav__link">
    Caches
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-balancer" class="md-nav__link">
    Load Balancer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#communication" class="md-nav__link">
    Communication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-cases" class="md-nav__link">
    Error cases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cdn" class="md-nav__link">
    CDN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loggingmetrics" class="md-nav__link">
    Logging/Metrics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/rkk1995/Notes/edit/master/docs/System Design/Template.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="template">Template</h1>
<h2 id="1-gather-requirements-1-2-min">(1) Gather Requirements [1-2 min]</h2>
<p>Ask questions to help define what parts of the system we will focus on.</p>
<ol>
<li>Users/Customers<ol>
<li>Who will use? How will system be used?</li>
<li>Do we need very low latency? (Usually serve from Memory then)</li>
</ol>
</li>
<li>Usage patterns<ol>
<li>What data do we store? Does the data change alot?</li>
<li>Real time or delayed data ok? Stale data okay?</li>
<li>Read your own writes usually a must otherwise confusing</li>
<li>Do we need to push notifications?</li>
</ol>
</li>
<li>Scale (use answers for capacity estimation)<ol>
<li>How many users?</li>
<li>How many data points?</li>
</ol>
</li>
<li>Open source technologies ok? Cost of development?</li>
</ol>
<h2 id="2-functional-non-functional-requirements-5-min">(2) Functional + Non Functional Requirements [5 min]</h2>
<ol>
<li>Functional requirements<ol>
<li>Actions the systems will make. Expand to make more extensible.</li>
<li>countViewEvent -&gt; countEvent -&gt; processEvent -&gt; processEvents</li>
<li>How to prevent abuse? API Key for greater limits</li>
</ol>
</li>
<li>Non-Functional requirements<ol>
<li>Availability vs Consistency (discuss)</li>
<li>Scalability</li>
<li>Performance (Low latency)</li>
<li>Durable (if required)</li>
<li>What features should we ensure (payment always processed, data not lost, etc)</li>
</ol>
</li>
</ol>
<h2 id="3-capacity-estimations-3-min">(3) Capacity Estimations [3 min]</h2>
<ol>
<li>Num users per day &amp; Num of events per user = Num events per day</li>
<li>QPS = Num events per day / 1E5</li>
<li>R&amp;W Ratio applied to QPS to figure out reads/writes per second.</li>
<li>Storage size per 1 day and 5 yr = Num events per day * 5Y</li>
<li>
<p>Bandwidth read / write = R/W per second * size of each</p>
</li>
<li>
<p>(Optional) Bandwidth estimate (#of bytes/sec system should handle for incoming and outgoing traffic)</p>
</li>
<li>(Optional) Cache estimate = 20% * Traffic<ol>
<li>80-20 rule - 20% of objects are used 80% of the time.</li>
<li>If we are using a cache, what is the kind of data we want to store in cache</li>
<li>Redis. Do we need persistence?</li>
</ol>
</li>
</ol>
<h2 id="4-high-level-design-5-10-min">(4) High Level Design [5-10 min]</h2>
<ul>
<li>"Hey I'm going to solve problem for small scale. 1 server is going to handle it. Then once I've fixed the solution I will work on scaling it up."</li>
<li>Explain high level data flow for <strong>each operation in functional requirements</strong>.</li>
<li>Stateful vs Stateless web tier: stateful has to deal with sticky session and other compleixty, stateless is more robust and scalable too.</li>
</ul>
<h2 id="5-data-model-5-min">(5) Data Model [5 min]</h2>
<p>Think about the nature of our data</p>
<ol>
<li>How many records do we store? (Capacity Estimations)</li>
<li>Size of each object? (Capacity Estimations)</li>
<li>. Raw data or aggregated data?</li>
<li>Relationship between records?</li>
<li>Read vs Write heavy?</li>
</ol>
<p>Defining the data model in the early part of the interview will clarify how data will flow between different system components. Later, it will guide for data partitioning and management. The candidate should identify various system entities, how they will interact with each other, and different aspects of data management like storage, transportation, encryption, etc.</p>
<p>Which database system should we use? Will Non Relational like <a href="https://en.wikipedia.org/wiki/Apache_Cassandra">Cassandra</a> best fit our needs, or should we use a relational-like solution? What kind of block storage should we use to store photos and videos? SQL consider if we have lots of tables, joins, need for consistency and transactions.</p>
<ul>
<li>Relational is harder to scale since it offers more guarantees. Does not mean its not as scalable, but more work and may lose guarantees.<ul>
<li>Availability, Consistency, Txn, Schema, Scalability, joins, ACID properties</li>
<li>Writes scaled by sharding / Reads scaled by replication</li>
<li>MySQL auto-incrementing columns for primary keys (unique IDs)</li>
</ul>
</li>
<li>Non Relational<ul>
<li>Easily scaled for writes / reads by simply adding more servers and using Consistent hashing.</li>
</ul>
</li>
</ul>
<p>See <a href="Concepts/Databases/SQL%20or%20NoSQL.html">SQL or NoSQL</a></p>
<h2 id="6-deep-dive-15-20-min">(6) Deep Dive [15-20 min]</h2>
<ul>
<li>Scaling individual components:<ul>
<li>Use Non Functional Requirements to drive this.</li>
<li>Availability, Consistency and Scale story for each component</li>
<li>Consistency and availability patterns</li>
</ul>
</li>
</ul>
<h3 id="database-scaling">Database scaling</h3>
<ul>
<li>Data access patterns. Do we need seperate hot/cold storage?<ul>
<li>DB cleanup processor?</li>
</ul>
</li>
<li>Vertical vs Horizontal. Usually Vertical not as cost efficient, reliable, or scalable.</li>
<li>When sharding in H, most important factor is sharding key.<ul>
<li>Resharding, Celebrity, Join/Denormalization.</li>
<li>Consider Proximity Server. We store data in DB but create Quad Tree in memory.<ul>
<li>Maybe we cannot fit entire Quad Tree on server. Shard so each quad tree contains 1/10th of original quad tree. How to shard?</li>
<li>If we shard on regionid, we may have hot regions. NY machines will have alot more queries/data than SA machines<ul>
<li>Although not applicable to Quad Tree, one approach to deal with hot partitions is to include event time into the partition key. All events for one minute go to one host and over time the load is distributed.</li>
</ul>
</li>
<li>If we shard on locationId, we have to fan out to all hosts containing each quad tree to aggregate results. Each quad tree will contain random elemsensts</li>
<li><strong>Tradeoff</strong></li>
</ul>
</li>
<li>Consistent Hashing</li>
</ul>
</li>
</ul>
<ul>
<li>MySQL<ul>
<li>Cluster proxy that routes traffic to correct shard. To know the shards, can use a configuration service which maintains a connection to all shards using ZooKeeper ephemeral nodes.</li>
<li>Shard proxy can sit infront of a database and cache queries, monitor health, and publish metrics.</li>
<li>Replication with async, semisync, sync</li>
<li>Complex, FB uses many optimizations and extensive cache layer. Also moved to LSM which has less write amplification w/ RocksDB.</li>
</ul>
</li>
<li>NoSQL<ul>
<li>Utilizes gossip protocol instead of a cluster proxy w/ configuration service.</li>
<li>Uses consistent hashing to pick the node to write the data. Data is replicated to next 2-3 nodes in the ring.</li>
<li>Can increase read/write quorum.</li>
</ul>
</li>
<li>Mention utilizing multiple data centers per shard.</li>
</ul>
<h3 id="message-queues">Message Queues</h3>
<ul>
<li>Asynchronous communication between web servers. Servse as a buffer and distributes requests.</li>
<li>If consumer is unavailable, message will not be lost. Fire and forget.</li>
<li>There are many benefits of batching: it increases throughput, it helps to save on cost, request compression is more effective. But there are drawbacks as well. It introduces some complexity both on the client and the server side. For example think of a scenario when partitioner service processes a batch request and several events from the batch fail, while other succeed. Should we re-send the whole batch?</li>
</ul>
<h3 id="caches">Caches</h3>
<ul>
<li>For data that is read heavy (data access patterns!)</li>
<li>Seperate cache tier? Yes, better performance, ability to scale independently</li>
<li>Persistence?</li>
<li>Eviction policies:<ul>
<li>LRU</li>
<li>LFU</li>
<li>FIFO</li>
</ul>
</li>
<li>Cache Loading Policies<ul>
<li>Cache aside</li>
<li>Write through</li>
<li>Write behind</li>
<li>Refresh ahead</li>
</ul>
</li>
<li>Consistency? ReadYourOwnWrites:<ul>
<li>Cache in your own region always updated on writes. Tie user to a specific cache cluster.</li>
<li>SQL Binlog used to replicate cache invalidations to other servers.</li>
</ul>
</li>
<li>Client caching, CDN caching, Web server caching, Database caching, Application caching, Cache @Query level, Cache @Object level</li>
</ul>
<h3 id="load-balancer">Load Balancer</h3>
<ul>
<li>Between clients and application servers, application servers and database/cache servers.</li>
<li>Layer 4 vs Layer 7 - transport vs application. Layer 7 has more info at cost of time and computing resources.</li>
<li>Pros<ul>
<li>Prevents requests going to unhealthy servers. Eliminates single point of failure</li>
<li>SSL termination - decrypt incoming requests and encrypt server responses</li>
<li>Sticky sessions</li>
</ul>
</li>
<li>Cons<ul>
<li>Can become performance bottleneck, increased complexity, need for multiple to prevent SPoF</li>
</ul>
</li>
<li>Primary/Seconday load balancer to address SpoF</li>
</ul>
<h3 id="communication">Communication</h3>
<ul>
<li>TCP: ordered, more overhead, has seq numbers and checksum fields for each packet</li>
<li>UDP: unordered, less latency, less overhead</li>
<li>Short Poll vs Long Poll vs Websocket</li>
<li>JSON vs Thrift. Saving space on the wire. 50% reductions Field tags vs field names.</li>
</ul>
<h3 id="error-cases">Error cases</h3>
<ul>
<li>Write Ahead Log for services that keep in memory data structures</li>
<li>Timeouts on service calls set to speed of 1% slowest requests. Maybe hit a bad server.</li>
<li>Retry mechanism. Exponential backoff with jitter.</li>
</ul>
<h3 id="cdn">CDN</h3>
<ul>
<li>Lightens DB load by serving static content (images, videso, CSS, JS)</li>
<li>Push vs Pull?<ul>
<li>Push better for small traffic. Pull allows user demanded data to be populated with TTL.</li>
</ul>
</li>
<li>Generally costly. Charged for data transfer in/out so should not cache infrequently used assets.</li>
</ul>
<h3 id="loggingmetrics">Logging/Metrics</h3>
<ul>
<li>Host level metrics: CPU/Memory/Disk I/O</li>
<li>Aggregated level metrics: performance of entire database/cache tier</li>
<li>Business metrics: DAU, retention, revenue</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../Notes/todo/articles.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: TODO" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              TODO
            </div>
          </div>
        </a>
      
      
        
        <a href="Concepts/CDN.html" class="md-footer__link md-footer__link--next" aria-label="Next: CDN" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              CDN
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
      <a href="mailto:theravindu@gmail.com" target="_blank" rel="noopener" title="" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M476 3.2 12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.tracking", "search.highlight", "search.share"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.82b56eb2.min.js"></script>
      
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
      
    
  </body>
</html>